stages:
  download_shps:
    cmd: python src/download_shps.py
    deps:
    - src/utils.py
    - src/download_shps.py
    outs:
    - data/US Census
  download_graphs:
    cmd: python src/download_graphs.py
    deps:
    - src/utils.py
    - src/download_graphs.py
    outs:
    - data/OSM
  graph_points:
    matrix:
      fips: ["09", "23", "25", "33", "44", "50"]
      mode: [drive, walk]
    cmd: python src/graph_points.py data/OSM/${item.fips}_${item.mode}.graphml data/US\
      Census/tl_2020_${item.fips}_tabblock20.zip data/US\ Census\ Nodes/tl_2020_${item.fips}_tabblock20_nodes_${item.mode}.csv
      --mode centroid
    deps:
    - src/graph_points.py
    - data/OSM/${item.fips}_${item.mode}.graphml
    - data/US Census/tl_2020_${item.fips}_tabblock20.zip
    outs:
    - data/US\ Census\ Nodes/tl_2020_${item.fips}_tabblock20_nodes_${item.mode}.csv
