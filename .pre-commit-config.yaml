# Pre-commit hooks for code quality
# See https://pre-commit.com for more information
# Install: pre-commit install
# Run manually: pre-commit run --all-files

repos:
  # General file checks
- repo: https://github.com/pre-commit/pre-commit-hooks
  rev: v4.6.0
  hooks:
  - id: trailing-whitespace
    exclude: ^(data/|docs/|archived/)
  - id: end-of-file-fixer
    exclude: ^(data/|docs/|archived/)
  - id: check-yaml
  - id: check-json
  - id: check-toml
  - id: check-added-large-files
    args: [--maxkb=10000]
  - id: check-merge-conflict
  - id: check-case-conflict
  - id: mixed-line-ending
    args: [--fix=lf]
  - id: detect-private-key

  # Python code formatting with Black
- repo: https://github.com/psf/black
  rev: 24.10.0
  hooks:
  - id: black
    language_version: python3.10
    exclude: ^(data/|docs/|archived/)

  # Import sorting with isort
- repo: https://github.com/pycqa/isort
  rev: 5.13.2
  hooks:
  - id: isort
    args: [--profile, black, --line-length, '100']
    exclude: ^(data/|docs/|archived/)

  # Linting with Ruff
- repo: https://github.com/astral-sh/ruff-pre-commit
  rev: v0.7.4
  hooks:
  - id: ruff
    args: [--fix, --exit-non-zero-on-fix]
    exclude: ^(data/|docs/|archived/|notebooks/)

  # Type checking with mypy
- repo: https://github.com/pre-commit/mirrors-mypy
  rev: v1.13.0
  hooks:
  - id: mypy
    additional_dependencies:
    - types-requests
    args: [--config-file=pyproject.toml]
    exclude: ^(tests/|notebooks/|data/|docs/|archived/)
        # Only check src/ directory for type hints

  # Security checks with Bandit
- repo: https://github.com/PyCQA/bandit
  rev: 1.7.10
  hooks:
  - id: bandit
    args: [-c, pyproject.toml]
    additional_dependencies: ['bandit[toml]']
    exclude: ^(tests/|data/|docs/|archived/)

  # Notebook checks
- repo: https://github.com/nbQA-dev/nbQA
  rev: 1.9.1
  hooks:
  - id: nbqa-black
    additional_dependencies: [black==24.10.0]
    exclude: ^(data/|docs/|archived/)
  - id: nbqa-isort
    additional_dependencies: [isort==5.13.2]
    args: [--profile=black, --line-length=100]
    exclude: ^(data/|docs/|archived/)
  - id: nbqa-ruff
    additional_dependencies: [ruff==0.7.4]
    args: [--fix]
    exclude: ^(data/|docs/|archived/)

  # YAML formatting
- repo: https://github.com/macisamuele/language-formatters-pre-commit-hooks
  rev: v2.14.0
  hooks:
  - id: pretty-format-yaml
    args: [--autofix, --indent, '2']
    exclude: ^(.github/workflows/)

# Configuration for pre-commit.ci (if using)
ci:
  autofix_commit_msg: |
    [pre-commit.ci] auto fixes from pre-commit hooks

    for more information, see https://pre-commit.ci
  autofix_prs: true
  autoupdate_branch: ''
  autoupdate_commit_msg: '[pre-commit.ci] pre-commit autoupdate'
  autoupdate_schedule: weekly
  skip: [mypy]  # Skip mypy in CI (too slow)
  submodules: false
